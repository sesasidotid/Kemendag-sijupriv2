<form (submit)="submit()" #userForm="ngForm">
  <div class="row mb-3">
    <label for="" class="col-sm-2 col-form-label fw-bold">NIP</label>
    <div class="col-sm-10">
      <input
        type="text"
        class="form-control"
        [(ngModel)]="userInstansi.nip"
        name="nip"
        required
        minlength="18"
        maxlength="18"
      />
    </div>
  </div>
  <div class="row mb-3">
    <label for="" class="col-sm-2 col-form-label fw-bold">Nama</label>
    <div class="col-sm-10">
      <input
        type="text"
        class="form-control"
        [(ngModel)]="userInstansi.name"
        name="name"
        required
      />
    </div>
  </div>
  <div class="row mb-3">
    <label for="" class="col-sm-2 col-form-label fw-bold">Email</label>
    <div class="col-sm-10">
      <input
        type="email"
        class="form-control"
        [(ngModel)]="userInstansi.email"
        name="email"
        required
      />
    </div>
  </div>
  <div class="row mb-3">
    <label for="" class="col-sm-2 col-form-label fw-bold">Password</label>
    <div class="col-sm-10">
      <input
        type="password"
        class="form-control"
        [(ngModel)]="userInstansi.password"
        name="password"
        required
      />
    </div>
  </div>
  <div class="row mb-3">
    <label for="" class="col-sm-2 col-form-label fw-bold">Operasional</label>
    <div class="col-sm-10">
      <select
        id="inputState"
        class="form-select"
        (change)="onOperasionalChange()"
        [(ngModel)]="operasional"
        name="operasional"
      >
        <option [value]="null">Pilih</option>
        <option
          *ngFor="let instansiType of instansiTypeList"
          [value]="instansiType.code"
        >
          {{ instansiType.name }}
        </option>
      </select>
    </div>
  </div>
  <div
    *ngIf="['IT3', 'IT4', 'IT5'].includes(this.operasional)"
    (change)="onProvinsiChange()"
    class="row mb-3"
  >
    <label for="" class="col-sm-2 col-form-label fw-bold">Provinsi</label>
    <div class="col-sm-10">
      <select
        id="inputState"
        class="form-select"
        [(ngModel)]="provinsiId"
        name="provinsiId"
      >
        <option [value]="null">Pilih</option>
        <option *ngFor="let provinsi of provinsiList" [value]="provinsi.id">
          {{ provinsi.name }}
        </option>
      </select>
    </div>
  </div>
  <div
    *ngIf="operasional == 'IT4' && provinsiId"
    (change)="onKabKotaChange()"
    class="row mb-3"
  >
    <label for="" class="col-sm-2 col-form-label fw-bold">Kabupaten</label>
    <div class="col-sm-10">
      <select
        id="inputState"
        class="form-select"
        [(ngModel)]="kabupatenId"
        name="kabupatenId"
      >
        <option [value]="null">Pilih</option>
        <option *ngFor="let kabupaten of kabKotaList" [value]="kabupaten.id">
          {{ kabupaten.name }}
        </option>
      </select>
    </div>
  </div>
  <div
    *ngIf="operasional == 'IT5' && provinsiId"
    (change)="onKabKotaChange()"
    class="row mb-3"
  >
    <label for="" class="col-sm-2 col-form-label fw-bold">Kota</label>
    <div class="col-sm-10">
      <select
        id="inputState"
        class="form-select"
        [(ngModel)]="kotaId"
        name="kotaId"
      >
        <option [value]="null">Pilih</option>
        <option *ngFor="let kota of kabKotaList" [value]="kota.id">
          {{ kota.name }}
        </option>
      </select>
    </div>
  </div>
  <div
    *ngIf="
      (operasional && ['IT1', 'IT2'].includes(operasional)) ||
      (operasional == 'IT3' && provinsiId) ||
      (['IT4', 'IT5'].includes(operasional) &&
        provinsiId &&
        (kabupatenId || kotaId))
    "
    class="row mb-3"
  >
    <label for="" class="col-sm-2 col-form-label fw-bold">Instansi</label>
    <div class="col-sm-10">
      <select
        id="inputState"
        class="form-select"
        [(ngModel)]="userInstansi.instansiId"
        name="instansiId"
        required
      >
        <option [value]="" disabled selected>Pilih</option>
        <option *ngFor="let instansi of instansiList" [value]="instansi.id">
          {{ instansi.name }}
        </option>
      </select>
    </div>
  </div>
  <div class="row text-center">
    <div class="col-12">
      <button
        type="submit"
        class="btn btn-sm btn-success float-end"
        [disabled]="!userForm.valid"
      >
        Simpan
      </button>
    </div>
  </div>
</form>
