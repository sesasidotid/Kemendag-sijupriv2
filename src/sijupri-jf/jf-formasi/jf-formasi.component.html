<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header align-items-center d-flex">
        <h4 class="card-title mb-0 flex-grow-1">
          Daftar Formasi {{ unitKerjaDetail?.name }}
        </h4>
        <div class="flex-shrink-0"></div>
      </div>
      <div class="card-body">
        <div class="mt-3">
          <table class="table table-bordered">
            <thead class="table-primary">
              <tr>
                <th scope="col" class="align-middle">No</th>
                <th scope="col" class="align-middle">Jabatan</th>
                <th scope="col" class="align-middle">Jenjang Jabatan</th>
                <th scope="col" class="align-middle">Jumlah Formasi</th>
              </tr>
            </thead>
            <tbody>
              <ng-container
                *ngFor="let item of availableFormation; let i = index"
              >
                <tr
                  *ngFor="let formasi of item.jenjangSumList; let j = index"
                  (mouseover)="hoverJabatan(i, true)"
                  (mouseleave)="hoverJabatan(i, false)"
                  [class.highlight]="hoveredJabatanIndex === i"
                >
                  <td
                    *ngIf="j === 0"
                    class="align-middle jabatan-cell"
                    [attr.rowspan]="item.jenjangSumList.length"
                    [class.highlight]="hoveredJabatanIndex === i"
                  >
                    {{ i + 1 }}
                  </td>
                  <td
                    *ngIf="j === 0"
                    class="align-middle jabatan-cell"
                    [attr.rowspan]="item.jenjangSumList.length"
                    [class.highlight]="hoveredJabatanIndex === i"
                  >
                    {{ item.jabatanName }}
                  </td>
                  <td class="align-middle">{{ formasi.jenjangName }}</td>
                  <td class="align-middle">{{ formasi.resultSum || 0 }}</td>
                </tr>
              </ng-container>

              <tr>
                <td colspan="3" class="align-middle text-center fw-bold">
                  Jumlah Formasi yang Tersedia
                </td>
                <td class="align-middle fw-bold">
                  {{ getTotalRekapitulasi() }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
